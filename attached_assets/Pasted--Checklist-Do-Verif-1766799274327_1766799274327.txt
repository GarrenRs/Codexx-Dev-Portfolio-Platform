فيما يلي Checklist تنفيذية دقيقة وقابلة للتطبيق لكل مرحلة من مراحل الانتقال، مكتوبة بصيغة Do / Verify / Done حتى تتمكن من العمل عليها خطوة-بخطوة بدون ارتباك، وبما يضمن عدم كسر التطبيق في أي نقطة.

يمكنك التعامل معها كـ وثيقة تشغيل رسمية (Execution Playbook).

المرحلة 0 — التثبيت والتحصين (Stabilization)
الهدف

تأمين الوضع الحالي قبل أي تغيير بنيوي.

Do

☐ تجميد إضافة أي Features جديدة

☐ مراجعة جميع Routes الحالية

☐ تحديد الجداول التي تحتوي بيانات المستخدم

☐ تفعيل Logging شامل (Auth / Errors / Actions)

☐ أخذ Backup كامل لقاعدة البيانات

Verify

☐ التطبيق يعمل بدون أخطاء

☐ يمكن الرجوع للنسخة السابقة خلال دقائق

Done

☐ نقطة انطلاق آمنة جاهزة

المرحلة 1 — إدخال Workspace (Core Architecture)
الهدف

فصل البيانات من User إلى Workspace بدون تغيير الواجهة.

Do

☐ إنشاء جدول workspaces

☐ ربط User الحالي بـ Workspace افتراضي

☐ إضافة workspace_id لكل جدول (projects, clients, portfolio, settings)

☐ تحديث Queries لاستخدام workspace_id

Verify

☐ كل مستخدم يرى بياناته فقط

☐ لا يوجد Cross-data access

Done

☐ التطبيق أصبح Multi-Tenant منطقيًا

المرحلة 2 — نظام المستخدمين (Auth Refactor)
الهدف

دعم تعدد المستخدمين داخل نفس الحساب.

Do

☐ تحديث جدول users

☐ إضافة is_super_admin

☐ إنشاء جدول user_workspace_roles

☐ إنشاء Role افتراضي (Account Owner)

☐ تعطيل إنشاء Workspace جديد تلقائيًا عند كل User

Verify

☐ مستخدم واحد يمكنه دعوة مستخدم آخر

☐ المستخدم الجديد يرى نفس Workspace

Done

☐ Teams مدعومة دون واجهة معقدة

المرحلة 3 — نظام الخطط (Plans Engine)
الهدف

ربط الميزات والقيود بالاشتراك.

Do

☐ إنشاء جدول plans

☐ تعريف features و limits بصيغة JSON

☐ ربط workspace → plan

☐ إضافة Guards قبل:

إنشاء مشروع

إضافة عميل

تفعيل Notifications

☐ تسجيل الاستهلاك (Usage)

Verify

☐ الخطة Free تُقيد الموارد

☐ الخطة Pro تفتح الميزات

Done

☐ النظام أصبح Subscription-Aware

المرحلة 4 — نظام الصلاحيات (Permissions Engine)
الهدف

التحكم في من يفعل ماذا داخل النظام.

Do

☐ إنشاء جداول roles و permissions

☐ ربط role_permissions

☐ إنشاء Middleware موحد

☐ ربط كل Route بـ Permission

☐ إنشاء Roles أساسية:

Owner

Manager

Editor

Viewer

Verify

☐ المستخدم يرى فقط ما يُسمح له

☐ لا يمكن تجاوز الصلاحيات عبر API

Done

☐ أمان وتحكم دقيق جاهز للإنتاج

المرحلة 5 — لوحة Super Admin
الهدف

إدارة النظام دون التدخل في بيانات المستخدمين.

Do

☐ إنشاء Routes تحت /admin

☐ تفعيل شرط is_super_admin

☐ إنشاء أقسام:

Users

Workspaces

Plans

Subscriptions

Logs

☐ منع الوصول لأي Feature تشغيلي

Verify

☐ المدير لا يرى مشاريع أو محافظ

☐ يمكنه إيقاف أو ترقية أي حساب

Done

☐ نظام تحكم مركزي كامل

المرحلة 6 — صفحة الهبوط + التسجيل
الهدف

استقبال مستخدمين جدد بطريقة صحيحة.

Do

☐ إنشاء Landing مستقلة

☐ ربط التسجيل باختيار الخطة

☐ إنشاء Workspace عند التسجيل

☐ تعيين Owner تلقائيًا

☐ تفعيل Email confirmation (إن وُجد)

Verify

☐ المستخدم ينتقل مباشرة للوحة المحفظة

☐ الخطة مفعلة بشكل صحيح

Done

☐ Funnel تسجيل جاهز

المرحلة 7 — تكييف الواجهة (UI Adaptation)
الهدف

واجهة ذكية حسب الخطة والدور.

Do

☐ إخفاء Tabs حسب Permissions

☐ إخفاء Features حسب Plan

☐ إضافة:

Usage indicators

Upgrade CTA

☐ منع Actions من الواجهة + Backend

Verify

☐ لا تظهر أزرار غير متاحة

☐ لا يوجد كسر تجربة المستخدم

Done

☐ تجربة SaaS ناضجة

المرحلة 8 — الاختبار والإطلاق
Do

☐ اختبار كل خطة

☐ اختبار ترقية وتخفيض

☐ اختبار دعوة مستخدمين

☐ اختبار Backup / Restore

☐ اختبار أمان API

Verify

☐ لا أخطاء حرجة

☐ الأداء مستقر

Done

☐ التطبيق جاهز للإطلاق الرسمي

الخلاصة

بهذه الـ Checklist:

لن تضيع في التنفيذ

كل مرحلة مستقلة

يمكن التراجع في أي وقت

تصل لتطبيق SaaS حقيقي بثقة